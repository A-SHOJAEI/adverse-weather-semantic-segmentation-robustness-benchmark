# Default configuration for adverse weather semantic segmentation

model:
  type: ensemble  # 'segformer', 'deeplabv3plus', 'ensemble'
  num_classes: 19
  include_depth: true
  ensemble_strategy: weighted_average  # 'weighted_average', 'max_confidence'
  temperature_scaling: true

data:
  dataset_type: combined  # 'cityscapes', 'kitti', 'combined'
  data_root: data
  image_size: [512, 1024]  # [height, width]
  weather_conditions: [clean, fog, rain, snow, night]
  apply_augmentation: true
  include_depth: true

training:
  batch_size: 2
  epochs: 100
  num_workers: 4
  pin_memory: true
  grad_clip: 1.0

optimizer:
  type: adamw  # 'adamw', 'sgd', 'adam'
  learning_rate: 0.001
  weight_decay: 0.01
  betas: [0.9, 0.999]
  momentum: 0.9  # for SGD

scheduler:
  enabled: true
  type: cosine  # 'cosine', 'step', 'plateau'
  eta_min: 0.000001
  step_size: 30  # for step scheduler
  gamma: 0.1     # for step scheduler
  patience: 5    # for plateau scheduler
  factor: 0.5    # for plateau scheduler

loss:
  type: fog_density_aware  # 'fog_density_aware', 'cross_entropy', 'focal'
  base_loss: cross_entropy
  depth_weight: 0.5
  fog_sensitivity: 2.0
  depth_loss_weight: 0.1

early_stopping:
  patience: 10
  min_delta: 0.001
  restore_best_weights: true

mlflow:
  enabled: true
  experiment_name: adverse_weather_segmentation
  run_name: null

evaluation:
  num_bins: 15
  weather_conditions: [clean, fog, rain, snow, night]

logging:
  level: INFO
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"

paths:
  checkpoints: checkpoints
  logs: logs
  results: results

device: auto  # 'auto', 'cpu', 'cuda', 'cuda:0'
seed: 42